{{- $tlsenabled := or .Values.ingress.tls.enabled (eq .Values.provider "ibm-openshift") -}}

Resurface has been successfully {{ if .Release.IsInstall }}installed{{ else if .Release.IsUpgrade }}upgraded{{end}}.

· Your helm release is named {{ .Release.Name }}.
· You are running Resurface version {{ .Chart.AppVersion }} in {{ if .Values.multinode.enabled }}multi{{ else }}single{{end}}-node configuration.
{{- if .Values.multinode.enabled }}
· Number of worker nodes: {{ .Values.multinode.workers }}
{{- end }}
{{- if .Values.ingress.enabled }}
· TLS is{{ if not $tlsenabled }} not{{ end }} enabled.
· Authentication is{{ if and $tlsenabled .Values.auth.enabled }} enabled.
  · Basic auth is{{ if not .Values.auth.basic.enabled }} not{{end}} enabled.
  · JWT auth is{{ if not .Values.auth.jwt.enabled }} not{{end}} enabled.
  · OAuth 2.0 is{{ if not .Values.auth.oauth2.enabled }} not{{end}} enabled.
{{- else }} not enabled. {{ end }}
{{- end}}

· Use the following command to list all the resources deployed with this release:

helm get all {{ .Release.Name }} -n {{ .Release.Namespace }}
{{ if and .Values.ingress.enabled $tlsenabled }}
· You can find the UI for your Resurface instance here: https://{{ .Values.ingress.tls.host }}/ui
{{- else if .Values.ingress.enabled }}

· Once the EXTERNAL IP for the Ingress Controller has been assigned, you can get the URL of the UI for your Resurface instance by running the following command:

echo http://$(kubectl get svc {{ include "resurface.fullname" . }}-kubernetes-ingress --namespace {{ .Release.Namespace }} --template "{{"{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}"}}")/ui

{{- else }}
· You can get the URL of the UI for your Resurface instance by running the following command:

echo http://$(kubectl get svc --namespace {{ .Release.Namespace }} coordinator --template "{{"{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}"}}"){{ if ne (int .Values.custom.service.apiexplorer.port) 80 }}:{{ .Values.custom.service.apiexplorer.port | default 7700 }}{{ end }}/
{{- end }}

· Use the following command to print this status page again:

helm status {{ .Release.Name }} -n {{ .Release.Namespace }}

{{ if .Values.sniffer.enabled -}}
· Network packet sniffing logger is ENABLED.
{{ if not (empty (include "resurface.sniffer.mirror.options" .)) }}
  · AWS VPC Mirroring is ENABLED (VNIs: {{ join ", " .Values.sniffer.vpcmirror.vnis }})
{{ end }}
{{ if and (empty (include "resurface.sniffer.mirror.options" .)) (empty (include "resurface.sniffer.options" .)) }}
  NOTE: NO services, pods, or labels were specified and discovery is DISABLED.
  This might result in unexpected behavior. Please, specifiy at least one service, pod or label, or enable service discovery.
  For more information use the following command:

helm show readme resurfaceio/resurface
{{ end }}
{{- end }}

{{ if .Values.consumer.azure.enabled -}}
· Azure API Management logger is ENABLED.
{{- end }}

{{ if .Values.consumer.aws.enabled -}}
· AWS API Gateway logger is ENABLED.
{{- end }}
